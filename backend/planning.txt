class Player {
    id: string
    username: string
    hand: Card[]
    uno: boolean

    getId(): string

    getHand(): Card[]
    addToHand(card: Card | Card[]): void

    removeCard(cardId: number | number[]): Card[]

    setIsUno(isUno: boolean): void
    isUno(): boolean
}

class Card {
    id: string
    name: string
    color: CardColor
    value: CardValue
}

class GameBoard {
    id: string
    discardPile: Card[]
    drawPile: Card[] // This is a stack
    currentColor: string

    getId(): string

    getDiscardPile(): Card[]
    addToDiscardPile(card: Card | Card[]): void
    cleanDiscardPile(): Card[] // This is used to clean the discardPile and add to drawPile

    getDrawPile(): Card[]
    addToDrawPile(card: Card | Card[]): void
    shuffleDrawPile(): void
    removeFromDrawPile(amount: number): Card[]

    setCurrentColor(color: string): void
    getCurrentColor(): string
}

class GameRoom {
    id: string
    name: string
    ownerId: string // player.id
    maxPlayers: number
    full: boolean
    started: boolean
    gameBoard: GameBoard
    currentPlayers: Player[]
    playerOrder: Player[]
    direction: number
    currentPlayerIndex: number

    getId(): string
    getOwnerId(): string
    getMaxPlayer(): number
    isFull(): boolean
    setHasStarted(started: boolean): void
    hasStarted(): boolean
    getGameBoard(): GameBoard
    
    getCurrentPlayers(): Player[]
    addCurrentPlayer(player: Player): void
    removeCurrentPlayer(player: Player): void

    // THIS IS TO BE CONSTRUCTED AFTER GAME HAS STARTED
    setPlayerOrder(players: Player[]): void
    getPlayerOrder(): Player[]
    removeFromPlayerOrder(player: Player): void
    setDirection(direction: number): void
    getDirection(): number
    setCurrentPlayerIndex(index: number): void
    getCurrentPlayerIndex(): number
}

class GameService {
    ON SERVER CONNECTION
        - Establish websocket connection (/)

    1. Player create a room in the namespace: 
        - On "create-room" event:
            - Initialize Player based on their socket 
            - Initialize GameRoom
            - Create a room in the namespace
            - Connect player to that room

    2. Players join created room:
        - On "join-room" event:
            If exists room id 
            If room is not full
            If room hasnt started
                Connect them to the room
            Else
                Dont connect and emit and error

    3. Players leave created room:
        - On "leave-room" event:
            - Remove them from currentPlayers
            - Disconnect them from the room

    4. Starting the game:
        - IMPLEMENT THIS LATER
}